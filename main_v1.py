import cv2  # OpenCV 라이브러리를 불러오기

# -------------------------------------------------------------
# 1. 웹캠(카메라) 열기
#    숫자 0은 기본 카메라(노트북 내장 카메라)를 의미함.
#    외장 카메라를 쓰는 경우 1, 2로 해볼 수 있음.
# -------------------------------------------------------------
cap = cv2.VideoCapture(0)

# -------------------------------------------------------------
# 2. 카메라가 정상적으로 열렸는지 확인
#    실패하면 프로그램 종료시키기
# -------------------------------------------------------------
if not cap.isOpened():
    print("웹캠을 열 수 없어요 ㅠㅠ (카메라가 연결되어 있는지 확인!)")
    exit()

# -------------------------------------------------------------
# 3. 실시간으로 웹캠 화면을 읽어서 보여주는 반복문 (무한 루프)
# -------------------------------------------------------------
while True:
    # 한 프레임(이미지 한 장) 읽기
    # ret: 읽기 성공 여부 (True/False)
    # frame: 현재 프레임(이미지)
    ret, frame = cap.read()

    # 카메라에서 프레임을 못 읽어오면 루프 종료
    if not ret:
        print("프레임을 읽지 못했어요. 카메라 연결 문제일 수도 있음.")
        break

    # ---------------------------------------------------------
    # 💡 거울처럼 보이게 이미지 좌우 반전
    #     - 우리가 평소 보는 카메라 앱처럼 보임
    # ---------------------------------------------------------
    frame = cv2.flip(frame, 1)

    # ---------------------------------------------------------
    # 4. 프레임을 화면에 띄우기
    #    "Webcam"은 윈도우 창 이름 (원하는 이름으로 바꿔도 됨)
    # ---------------------------------------------------------
    cv2.imshow("Webcam", frame)

    # ---------------------------------------------------------
    # 5. 키보드 입력 감지
    #    - 1ms마다 키보드를 체크함
    #    - 'q' 키를 누르면 루프 종료
    # ---------------------------------------------------------
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

# -------------------------------------------------------------
# 6. 모든 자원 해제(중요!)
#    - 카메라 사용 끝내기
#    - 열린 윈도우 모두 닫기
# -------------------------------------------------------------
cap.release()
cv2.destroyAllWindows()